{"version":3,"file":"SearchBarView.js","names":["SearchBarView","props","visible","subscribe","setTimeout","interval","setInterval","el","_jquery","focus","clearInterval","document","on","e","key","query"],"sources":["../../ts/src/in-page/SearchBarView.ts"],"sourcesContent":["import $ from \"jquery\"\n\ninterface Props {\n    query: KnockoutObservable<string>\n    visible: KnockoutObservable<boolean>\n}\n\nexport class SearchBarView {\n    props: Props\n\n    constructor(props: Props) {\n        this.props = props\n\n        props.visible.subscribe(visible => {\n            visible && setTimeout(() => {\n                const interval = setInterval(() => {\n                    const el = $(\"[type=search]\")[0]\n                    if (el) {\n                        el.focus()\n                        clearInterval(interval)\n                    }\n                }, 10)\n            }, 10)\n        })\n\n        $(document).on(\"keyup\", e => {\n            if (e.key === \"Escape\") {\n                if (props.query()) {\n                    props.query(\"\")\n                }\n            }\n        })\n    }\n}\n"],"mappings":";;MAOaA,aAAa,GAGtB,SAAAA,cAAYC,KAAY,EAAE;IAAA;;IACtB,IAAI,CAACA,KAAK,GAAGA,KAAK;IAElBA,KAAK,CAACC,OAAO,CAACC,SAAS,CAAC,UAAAD,OAAO,EAAI;MAC/BA,OAAO,IAAIE,UAAU,CAAC,YAAM;QACxB,IAAMC,QAAQ,GAAGC,WAAW,CAAC,YAAM;UAC/B,IAAMC,EAAE,GAAG,IAAAC,OAAA,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC;UAChC,IAAID,EAAE,EAAE;YACJA,EAAE,CAACE,KAAK,CAAC,CAAC;YACVC,aAAa,CAACL,QAAQ,CAAC;UAC3B;QACJ,CAAC,EAAE,EAAE,CAAC;MACV,CAAC,EAAE,EAAE,CAAC;IACV,CAAC,CAAC;IAEF,IAAAG,OAAA,EAAEG,QAAQ,CAAC,CAACC,EAAE,CAAC,OAAO,EAAE,UAAAC,CAAC,EAAI;MACzB,IAAIA,CAAC,CAACC,GAAG,KAAK,QAAQ,EAAE;QACpB,IAAIb,KAAK,CAACc,KAAK,CAAC,CAAC,EAAE;UACfd,KAAK,CAACc,KAAK,CAAC,EAAE,CAAC;QACnB;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EAAA;IAAAf,aAAA,EAAAA;EAAA;AAAA"}