{"version":3,"file":"ItemListView.js","names":["ItemListView","props","_this","setItems","indexes","indexIdentifier","updated","_underscore","each","idx","identifier","items","_knockout","observableArray","result","activeIndex","subscribe","index"],"sources":["../../ts/src/in-page/ItemListView.ts"],"sourcesContent":["import { IndexResult, Result } from \"../types\"\nimport _ from \"underscore\"\nimport ko from \"knockout\"\n\ninterface Props {\n    result: KnockoutObservable<Result>\n    activeIndex: KnockoutObservable<string>\n}\n\nexport class ItemListView {\n    props: Props\n\n    items: KnockoutObservableArray<object>\n\n    constructor(props: Props) {\n        this.props = props\n        this.items = ko.observableArray([])\n\n        this.setItems(props.result().indexes, props.activeIndex())\n\n        props.result.subscribe(result => this.setItems(result.indexes, props.activeIndex()))\n        props.activeIndex.subscribe(index => this.setItems(props.result().indexes, index))\n    }\n\n    setItems = (indexes: IndexResult[], indexIdentifier: string) => {\n        let updated = false\n\n        _.each(indexes, idx => {\n            if (idx.identifier === indexIdentifier) {\n                this.items(idx.items)\n                updated = true\n            }\n        })\n\n        !updated && this.items([])\n    }\n}\n"],"mappings":";;MASaA,YAAY,GAKrB,SAAAA,aAAYC,KAAY,EAAE;IAAA;;IAAA,IAAAC,KAAA;IAAA,KAU1BC,QAAQ,GAAG,UAACC,OAAsB,EAAEC,eAAuB,EAAK;MAC5D,IAAIC,OAAO,GAAG,KAAK;MAEnBC,WAAA,CAAEC,IAAI,CAACJ,OAAO,EAAE,UAAAK,GAAG,EAAI;QACnB,IAAIA,GAAG,CAACC,UAAU,KAAKL,eAAe,EAAE;UACpCH,KAAI,CAACS,KAAK,CAACF,GAAG,CAACE,KAAK,CAAC;UACrBL,OAAO,GAAG,IAAI;QAClB;MACJ,CAAC,CAAC;MAEF,CAACA,OAAO,IAAIJ,KAAI,CAACS,KAAK,CAAC,EAAE,CAAC;IAC9B,CAAC;IApBG,IAAI,CAACV,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACU,KAAK,GAAGC,SAAA,CAAGC,eAAe,CAAC,EAAE,CAAC;IAEnC,IAAI,CAACV,QAAQ,CAACF,KAAK,CAACa,MAAM,CAAC,CAAC,CAACV,OAAO,EAAEH,KAAK,CAACc,WAAW,CAAC,CAAC,CAAC;IAE1Dd,KAAK,CAACa,MAAM,CAACE,SAAS,CAAC,UAAAF,MAAM;MAAA,OAAIZ,KAAI,CAACC,QAAQ,CAACW,MAAM,CAACV,OAAO,EAAEH,KAAK,CAACc,WAAW,CAAC,CAAC,CAAC;IAAA,EAAC;IACpFd,KAAK,CAACc,WAAW,CAACC,SAAS,CAAC,UAAAC,KAAK;MAAA,OAAIf,KAAI,CAACC,QAAQ,CAACF,KAAK,CAACa,MAAM,CAAC,CAAC,CAACV,OAAO,EAAEa,KAAK,CAAC;IAAA,EAAC;EACtF,CAAC;EAAA;IAAAjB,YAAA,EAAAA;EAAA;AAAA"}